{% extends "sidebar.html" %}

{% block sidebar_css %}
    {% load static %}
    <link rel="stylesheet" href="{% static "styles/persons.css" %}">
{% endblock %}
 
{% block sidebar_content %}
    {% for person in persons %}
        {% if person.id == chosen.id %}
            <li class="nav-item item">
                <a class="nav-link text-dark text-bold font-weight-bold" href="/persons/{{ person.id }}">{{ person.name }}</a>
            </li>
        {% else %}
            <li class="nav-item item">
                <a class="nav-link text-dark" href="/persons/{{ person.id }}">{{ person.name }}</a>
            </li>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block page_content %}
<section id="person" class="d-flex flex-row flex-wrap w-100 h-100">
    <section id="imageFormContainer" class="center-flex-item">
        {% if chosen %}
            <img src="" class="d-block w-100 mt-1" id="fileImage">

            <form id="imageForm" method="post" enctype="multipart/form-data" action="/persons/{{ chosen.id }}/">
                {% csrf_token %}
                <div class="custom-file mb-1">
                    <input type="file" name="image" class="custom-file-input" id="imageInput" required>
                    <label class="custom-file-label" for="imageInput">Choose image...</label>
                    <div class="invalid-feedback">Please choose a valid file!</div>
                </div>
                <button class="btn btn-lg btn-primary btn-block mb-1" type="submit">Add image</button>
            </form>
        {% endif %}
    </section>

    <section id="imagesContainer" class="center-flex-item">
        <div id="images">
            {% for image in images %}
                <div class="image">
                    <img class="w-100" src="{{ image.image_file.url }}">
                    <a href="#" class="btn btn-secondary btn-lg active" role="button">Delete</a>
                </div>
            {% endfor %}
        </div>
    </section>
</section>
{% endblock %}

{% block sidebar_scripts %}
    {% load static %}
    <script src="{% static "scripts/image-input.js" %}"></script>
{% endblock %}